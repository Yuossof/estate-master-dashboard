import{u as z,r as a,j as e,w as A,S as V,T as q,Q as B,C as G,i as H,y as Q,F as U,z as $,G as J,k as W}from"./index-DSdmN7-O.js";import{d as X,g as Y}from"./options-OSOtnHuq.js";const Z=({columns:h,optionsRows:l=[],setOptionsRows:p,setRefetch:f,refetch:d})=>{const y=z(),[o,c]=a.useState(!1),[i,b]=a.useState(null),[m,g]=a.useState(!1),u=async()=>{try{g(!0);const t=await X(i);B.success(t.massage||t.message),c(!1);const r=l.filter(v=>v.id!==i);p(r),r.length===0&&f(!d),console.log(t)}catch(t){console.log(t)}finally{g(!1)}},x=t=>{y("/options/edit",{state:{rowData:t}})};return e.jsxs(e.Fragment,{children:[e.jsx(A,{onConfirm:u,onCancel:()=>c(!1),isOpen:o,message:"Are you sure you want to delete this item?",confirmText:"Delete",cancelText:"Cancel",isLoading:m}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200/80 dark:border-[var(--border-primary)]",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsx("tr",{children:h.map((t,r)=>e.jsx("th",{scope:"col",className:"table-th",children:t.label},r))})}),e.jsx("tbody",{className:"bg-white dark:bg-transparent divide-y divide-gray-100 dark:divide-[var(--border-secondary)]",children:l.length>0&&l.map((t,r)=>e.jsxs("tr",{className:`align-top ${r%2!==0?"bg-gray-50/50 dark:bg-[var(--surface-elevated)]/30":"bg-white dark:bg-transparent"}`,children:[e.jsx("td",{className:"table-td",children:t.id}),e.jsx("td",{className:"table-td",children:t.company_id}),e.jsx("td",{className:"table-td",children:t.item_key}),e.jsx("td",{className:"table-td",children:t.item_value}),e.jsx("td",{className:"table-td",children:t.item_value_ar}),e.jsx("td",{className:"table-td",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{onClick:()=>x(t),size:20,className:"dark:text-gray-400 text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer"}),e.jsx(q,{onClick:()=>{c(!0),b(t.id)},size:20,className:"dark:text-gray-400 text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer"})]})})]},r))})]})})]})},E=[{label:"ID"},{label:"Company ID"},{label:"Item Key"},{label:"Item Value"},{label:"Item Value Arabic"},{label:"Action"}],se=()=>{const[h,l]=a.useState([]),[p,f]=a.useState({}),[d,y]=a.useState(1),[o,c]=a.useState(""),[i,b]=a.useState(""),[m,g]=a.useState(!1),[u,x]=a.useState(!1),[t,r]=a.useState({id:"",name:""}),[v,ee]=a.useState(""),[P,C]=a.useState([]),[w,j]=a.useState(!0),[R,I]=a.useState(!1),[S,O]=a.useState(1),[N,D]=a.useState(""),[k,F]=a.useState(""),L=a.useRef(null);a.useEffect(()=>{const s=setTimeout(()=>{F(N)},350);return()=>{clearTimeout(s)}},[N]),a.useEffect(()=>{const s=setTimeout(()=>{b(o)},350);return()=>{clearTimeout(s)}},[o]),a.useEffect(()=>{O(1),C([]),j(!0)},[k]),a.useEffect(()=>{(async()=>{try{x(!0);const n=await Y(11,d,t.id,v,i);l(n.data.items||[]),f(n.data.pagination||{})}catch(n){console.log(n)}finally{x(!1)}})()},[d,m,i,t.id]),a.useEffect(()=>{(async()=>{if(w)try{I(!0);const n=await W(7,S,k),K=n.data.items||[];K.length===0&&j(!1),S>=n.data.pagination.totalPages&&j(!1),C(_=>[..._,...K.map(T=>({id:T.id,name:T.name}))])}catch(n){console.log(n)}finally{I(!1)}})()},[S,k]);const M=()=>{w&&O(s=>s+1)};return e.jsx("div",{children:e.jsxs(G,{noborder:!0,children:[e.jsxs("div",{className:"mb-6 pb-4 border-b border-gray-100 dark:border-[var(--border-secondary)]",children:[e.jsx("h1",{className:"md:text-2xl text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Options Management"}),e.jsx("p",{className:"md:text-base text-[14px] text-gray-500 dark:text-gray-400 mt-1",children:"Filter, search, and manage available options"})]}),e.jsx("div",{className:"flex w-full md:items-center sm:items-end items-center mb-8 md:flex-row flex-col",children:e.jsx("div",{className:"flex items-center gap-2 flex-1 md:flex-row flex-col md:w-auto w-full",children:e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"clientName",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Company"}),e.jsx(H,{searchKeySelect:N,onInputChange:s=>D(s),onChange:s=>r(s),onEndReached:M,options:P,value:t.name,isLoading:R,optionBoxRef:L,noResultMessage:"No result"})]})})}),e.jsx("div",{className:"h-px w-full bg-gray-100 dark:bg-[var(--border-secondary)] my-3 mb-4"}),e.jsxs("div",{className:"flex justify-between w-full mb-5",children:[e.jsx("div",{className:"flex items-center gap-2 overflow-hidden",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:o,onChange:s=>c(s.target.value),className:"w-full pl-9 pr-3 py-2 text-sm rounded-lg border border-gray-200/80 dark:border-[var(--border-primary)] bg-gray-50/50 dark:bg-[var(--surface-elevated)] text-gray-700 dark:text-slate-200 placeholder-gray-400 dark:placeholder-slate-500 outline-none focus:border-indigo-300 dark:focus:border-indigo-500/50 focus:ring-2 focus:ring-indigo-500/10 transition-all"}),e.jsx(Q,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500 w-4 h-4"})]})}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-3.5 py-2 text-sm font-medium rounded-lg border border-gray-200/80 dark:border-[var(--border-primary)] bg-white dark:bg-[var(--surface-elevated)] text-gray-600 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-[var(--surface-hover)] transition-colors flex-shrink-0",children:[e.jsx("span",{className:"sm:block hidden",children:"Export"}),e.jsx(U,{size:20})]})]}),u?e.jsx($,{columns:E,rows:12}):e.jsx(Z,{columns:E,optionsRows:h,setOptionsRows:l,refetch:m,setRefetch:g}),e.jsx("div",{className:"my-4 w-full flex justify-center",children:e.jsx(J,{onPageChange:y,pagination:p,isLoading:u})})]})})};export{se as default};
