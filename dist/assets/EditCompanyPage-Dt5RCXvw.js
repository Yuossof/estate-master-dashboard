import{j as e,I as n,a as y,b as j,S as N,u as v,d as w,r as p,C as k,c as C,Q as h,A as F,D as E}from"./index-DSdmN7-O.js";import{C as A,c as L}from"./companySchema-nDP4xM9G.js";import{T as f}from"./Textarea-i9eGARvf.js";const U=({companyData:l,setCompanyData:m,handleSubmit:s,errors:t,setErrors:x,isLoading:d})=>{const r=o=>{const{name:i,value:c}=o.target;x(a=>({...a,[i]:""})),m(a=>({...a,[i]:c}))};return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"name",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Name"}),e.jsx(n,{type:"text",placeholder:"Name",name:"name",id:"name",value:l.name,onChange:r}),t.name&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.name]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"name_ar",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Name Arabic"}),e.jsx(n,{type:"text",placeholder:"Name Arabic",name:"name_ar",id:"name_ar",value:l.name_ar,onChange:r}),t.name_ar&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.name_ar]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"color",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Color"}),e.jsx(A,{className:"mt-2",value:l.color,onChange:o=>m(i=>({...i,color:o}))}),t.color&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.color]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"facebook_url",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Facebook"}),e.jsx(n,{type:"text",placeholder:"https://example.com",name:"facebook_url",id:"facebook_url",value:l.facebook_url,onChange:r}),t.facebook_url&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.facebook_url]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"about_us_url",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"About Us"}),e.jsx(n,{type:"text",placeholder:"https://example.com",name:"about_us_url",id:"about_us_url",value:l.about_us_url,onChange:r}),t.about_us_url&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.about_us_url]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"privacy_policy_url",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Privacy Policy"}),e.jsx(n,{type:"text",placeholder:"https://example.com",name:"privacy_policy_url",id:"privacy_policy_url",value:l.privacy_policy_url,onChange:r}),t.privacy_policy_url&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.privacy_policy_url]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"instagram_url",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Instagram"}),e.jsx(n,{type:"text",placeholder:"https://example.com",name:"instagram_url",id:"instagram_url",value:l.instagram_url,onChange:r}),t.instagram_url&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.instagram_url]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"twitter_url",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Twitter"}),e.jsx(n,{type:"text",placeholder:"https://example.com",name:"twitter_url",id:"twitter_url",value:l.twitter_url,onChange:r}),t.twitter_url&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.twitter_url]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"youtube_url",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Youtube"}),e.jsx(n,{type:"text",placeholder:"https://example.com",name:"youtube_url",id:"youtube_url",value:l.youtube_url,onChange:r}),t.youtube_url&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.youtube_url]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"website_url",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Website"}),e.jsx(n,{type:"text",placeholder:"https://example.com",name:"website_url",id:"website_url",value:l.website_url,onChange:r}),t.website_url&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.website_url]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"hotline",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Hotline"}),e.jsx(n,{type:"text",placeholder:"EX:00000",name:"hotline",id:"hotline",value:l.hotline,onChange:r}),t.hotline&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.hotline]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"fees_per_point",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Fees per point"}),e.jsx(n,{type:"text",placeholder:"Fees",name:"fees_per_point",id:"fees_per_point",value:l.fees_per_point,onChange:r}),t.fees_per_point&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.fees_per_point]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"logo",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Logo"}),e.jsxs("div",{className:"mt-2 flex flex-col items-center",children:[e.jsxs("label",{htmlFor:"logo",className:"flex flex-col items-center justify-center w-full h-32 px-3 border-2 border-dashed border-gray-300 dark:border-[var(--border-primary)] rounded-md cursor-pointer hover:border-blue-500 dark:hover:border-sky-400 transition-colors",children:[l.image?e.jsx("img",{src:l.image instanceof File?URL.createObjectURL(l.image):l.image,alt:"Company Logo",className:"w-20 h-20 object-contain mb-2 border-[1px] border-slate-200 rounded-md"}):e.jsx(y,{size:40,className:"mb-2 text-gray-400"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-300 text-sm",children:"Update Image"})]}),e.jsx("input",{type:"file",name:"logo",id:"logo",className:"hidden",onChange:o=>{const i=o.target.files[0];m(c=>({...c,image:i,imagePreview:i?URL.createObjectURL(i):null}))}})]}),t.image&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.image]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 min-w-[150px]",children:[e.jsx("label",{htmlFor:"description",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Description"}),e.jsx(f,{placeholder:"Description",name:"description",id:"description",value:l.description,onChange:r}),t.description&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.description]})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-[150px]",children:[e.jsx("label",{htmlFor:"description_ar",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Description Arabic"}),e.jsx(f,{placeholder:"Description Arabic",name:"description_ar",id:"description_ar",value:l.description_ar,onChange:r}),t.description_ar&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",t.description_ar]})]})]})]}),e.jsxs("div",{className:"mt-6 flex w-full md:justify-end",children:[e.jsx(j,{}),e.jsxs("button",{disabled:d,style:{opacity:d?"0.6":"1"},type:"button",className:"btn-primary flex items-center gap-3 justify-center h-9 px-3 rounded-md md:w-auto w-full",onClick:s,children:[e.jsx("span",{children:"Update"}),e.jsx(N,{})]})]})]})},P={name:"",name_ar:"",description:"",description_ar:"",color:"#000000",facebook_url:"",privacy_policy_url:"",about_us_url:"",instagram_url:"",twitter_url:"",youtube_url:"",website_url:"",hotline:"",fees_per_point:"",image:null},T=()=>{const l=v(),s=w().state.rowData,[t,x]=p.useState(P),[d,r]=p.useState(!1),[o,i]=p.useState({});p.useEffect(()=>{s&&x({name:s.name||"",name_ar:s.name_ar||"",description:s.description||"",description_ar:s.description_ar||"",color:s.global_setting.color||"#000000",facebook_url:s.global_setting.facebook_url||"",privacy_policy_url:s.global_setting.privacy_policy_url||"",about_us_url:s.global_setting.about_us_url||"",instagram_url:s.global_setting.instagram_url||"",twitter_url:s.global_setting.twitter_url||"",youtube_url:s.global_setting.youtube_url||"",website_url:s.global_setting.website_url||"",hotline:s.global_setting.hotline||"",fees_per_point:s.global_setting.fees_per_point||"",image:s.logo||null})},[s]);const c=async()=>{try{const a=new FormData;try{await L.validate(t,{abortEarly:!1}),a.append("name",t.name),a.append("name_ar",t.name_ar),a.append("description",t.description),a.append("description_ar",t.description_ar),a.append("color",t.color),a.append("facebook_url",t.facebook_url),a.append("privacy_policy_url",t.privacy_policy_url),a.append("about_us_url",t.about_us_url),a.append("instagram_url",t.instagram_url),a.append("twitter_url",t.twitter_url),a.append("youtube_url",t.youtube_url),a.append("website_url",t.website_url),a.append("hotline",t.hotline),a.append("fees_per_point",t.fees_per_point),a.append("images[]",t.image),i({})}catch(g){if(g.inner){const _={};g.inner.forEach(b=>{_[b.path]=b.message}),console.log("Parsed errors:",_),i(_)}return}r(!0);const u=await C(a);h.success(u.message||u.massage),u.status==="success"&&l("/companies")}catch(a){a instanceof F?h.error(a.message):h.error(E.message)}finally{r(!1)}};return e.jsx("div",{className:"space-y-6",children:e.jsxs(k,{children:[e.jsxs("div",{className:"mb-6 pb-4 border-b border-gray-100 dark:border-[var(--border-secondary)]",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50 tracking-tight",children:"Update Company"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1.5",children:"Edit the details below to update this company"})]}),e.jsx(U,{companyData:t,setCompanyData:x,errors:o,setErrors:i,handleSubmit:c,isLoading:d})]})})};export{T as default};
