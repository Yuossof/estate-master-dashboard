import{j as e,I as R,P as V,u as W,r as s,C as X,i as U,k as Y,n as Z,Q as $}from"./index-DSdmN7-O.js";import{c as ee}from"./company-users-88HzjCM-.js";const ae=({formData:c,setFormData:r,handleSubmit:h,errors:l,setErrors:x,isLoading:p})=>{const n=f=>{const{name:m,value:u}=f.target;x(o=>({...o,[m]:""})),r(o=>({...o,[m]:u}))};return e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"name",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Name"}),e.jsx(R,{type:"text",placeholder:"Name",name:"name",id:"name",value:c.name,onChange:n}),l.name&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",l.name[0]]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"email",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Email"}),e.jsx(R,{type:"email",placeholder:"Email",name:"email",id:"email",value:c.email,onChange:n}),l.email&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",l.email[0]]})]}),e.jsxs("div",{className:"flex flex-col min-w-[150px]",children:[e.jsx("label",{htmlFor:"password",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Password"}),e.jsx(R,{type:"password",placeholder:"Password",name:"password",id:"password",value:c.password,onChange:n}),l.password&&e.jsxs("p",{className:"text-[13px] text-red-500 mt-2 ml-1",children:["*",l.password[0]]})]})]})}),e.jsx("div",{className:"mt-6 flex w-full md:justify-end",children:e.jsxs("button",{disabled:p,style:{opacity:p?"0.6":"1"},type:"button",className:"btn-primary flex items-center gap-3 justify-center h-10 px-3 rounded-md md:w-auto w-full",onClick:h,children:[e.jsx("span",{children:"Create"}),e.jsx(V,{})]})})]})},se={name:"",email:"",password:"",role:""},ne=()=>{const c=W(),[r,h]=s.useState(se),[l,x]=s.useState(!1),[p,n]=s.useState({}),[f,m]=s.useState([]),[u,o]=s.useState(!0),[D,v]=s.useState(!1),[g,b]=s.useState(1),[E,T]=s.useState({}),[y,H]=s.useState(""),[S,A]=s.useState(""),F=s.useRef(null),[B,P]=s.useState([]),[k,K]=s.useState(!0),[Q,M]=s.useState(!1),[j,I]=s.useState(1),[L,_]=s.useState({}),[w,q]=s.useState(""),[C,z]=s.useState("");s.useEffect(()=>{(async()=>{if(u)try{v(!0);const t=await Y(11,g,S),d=t.data.items||[];d.length===0&&o(!1),g>=t.data.pagination.totalPages&&o(!1),m(N=>[...N,...d.map(i=>({id:i.id,name:i.name}))])}catch(t){console.log(t)}finally{v(!1)}})()},[g,S]),s.useEffect(()=>{const a=setTimeout(()=>{z(w)},350);return()=>clearTimeout(a)},[w]),s.useEffect(()=>{I(1),P([]),K(!0)},[C]);const G=()=>{k&&I(a=>a+1)};s.useEffect(()=>{(async()=>{if(k)try{M(!0);const t=await Z(11,j,C),d=t.data.items||[];(d.length===0||j>=t.data.pagination.totalPages)&&K(!1),P(N=>[...N,...d.map(i=>({id:i.id,name:i.name}))])}catch(t){console.log(t)}finally{M(!1)}})()},[j,C]),s.useEffect(()=>{const a=setTimeout(()=>{A(y)},350);return()=>{clearTimeout(a)}},[y]),s.useEffect(()=>{b(1),m([]),o(!0)},[S]);const J=()=>{u&&b(a=>a+1)},O=async()=>{try{const a=new FormData;a.append("name",r.name),a.append("email",r.email),a.append("password",r.password),a.append("company_id",E.id),a.append("role",L.name),n({}),x(!0);const t=await ee(a);$.success(t.message||t.massage),c("/company-users")}catch(a){n(a.errors)}finally{x(!1)}};return e.jsx("div",{className:"space-y-6",children:e.jsxs(X,{children:[e.jsxs("div",{className:"mb-6 pb-4 border-b border-gray-100 dark:border-[var(--border-secondary)]",children:[e.jsx("h1",{className:"md:text-2xl text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Create Company User"}),e.jsx("p",{className:"md:text-base text-[14px] text-gray-500 dark:text-gray-400 mt-1",children:"Add a new company user"})]}),e.jsx("div",{className:"flex w-full md:items-center sm:items-end items-center mb-8 md:flex-row flex-col",children:e.jsxs("div",{className:"flex items-center gap-2 flex-1 md:flex-row flex-col md:w-auto w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"clientName",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Company"}),e.jsx(U,{searchKeySelect:y,onInputChange:a=>H(a),onChange:a=>T(a),onEndReached:J,options:f,value:E.name,isLoading:D,optionBoxRef:F,noResultMessage:"No result"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"clientName",className:"px-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:"Role"}),e.jsx(U,{searchKeySelect:w,onInputChange:a=>q(a),onChange:a=>_(a),onEndReached:G,options:B,value:L.name,isLoading:Q,optionBoxRef:F,noResultMessage:"No result"})]})]})}),e.jsx(ae,{formData:r,setFormData:h,errors:p,setErrors:n,handleSubmit:O,isLoading:l})]})})};export{ne as default};
