import{r as a,j as e,p as w,q as j,X as C,t as D,u as I,w as A,M as N,S as T,T as P,x as E,C as z,y as O,F as _,z as L,G as U}from"./index-DSdmN7-O.js";import{g as F,d as K,a as q}from"./service-categories-DSCKs9SA.js";const R=({isOpen:c,setIsDrawerOpen:s,onClose:i,serviceCategoryId:o})=>{const[l,b]=a.useState({}),[x,d]=a.useState(!1);return a.useEffect(()=>{if(!o)return;const t=new AbortController;return(async()=>{try{d(!0);const n=await F(o,t.signal);console.log(n),b(n.data)}catch(n){console.log(n)}finally{d(!1)}})(),()=>t.abort()},[o]),e.jsx(w,{children:c&&e.jsxs("div",{onClick:()=>s(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-end z-[1000]",children:[e.jsx("div",{className:"absolute inset-0",onClick:i}),e.jsxs(j.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.3,ease:[.4,0,.2,1]},className:"relative h-full w-full max-w-lg bg-white dark:bg-[var(--surface-elevated)] shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-[var(--surface-elevated)] border-b border-gray-200 dark:border-[var(--border-primary)] px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Service Category Details"}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-[var(--surface-hover)] rounded-full transition-colors",children:e.jsx(C,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),e.jsx("div",{className:"overflow-y-auto h-full pb-20",children:x?e.jsxs("div",{className:"flex flex-col justify-center items-center h-96 space-y-4",children:[e.jsx(j.div,{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full",animate:{rotate:360},transition:{repeat:Number.POSITIVE_INFINITY,duration:1,ease:"linear"}}),e.jsx(D,{})]}):e.jsx("div",{className:"px-6 py-6 space-y-8",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsx(f,{label:"ID",value:l.id}),e.jsx(f,{label:"Name",value:l.name||"-"}),e.jsx(f,{label:"Name Arabic",value:l.name_ar||"-"}),e.jsx(f,{label:"Created At",value:l.created_at||"-"}),e.jsx(f,{label:"Updated At",value:l.updated_at||"-"})]})})})})]})]})})},f=({label:c,value:s,status:i})=>e.jsx("div",{className:"p-4 bg-white dark:bg-[var(--surface-card)] border border-gray-200 dark:border-[var(--border-primary)] rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:c}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium",children:s}),i==="success"&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i==="warning"&&e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"})]})]})}),B=({columns:c,serviceCategoryRows:s=[],setServiceCategoryRows:i,setRefetch:o,refetch:l})=>{const b=I(),[x,d]=a.useState(!1),[t,h]=a.useState(null),[n,v]=a.useState(!1),[p,y]=a.useState(!1),m=async()=>{try{v(!0);const r=await K(t);d(!1);const g=s.filter(S=>S.id!==t);i(g),g.length===0&&o(!l),console.log(r)}catch(r){console.log(r)}finally{v(!1)}},u=r=>{b("/service-categories/edit",{state:{rowData:r}})};return e.jsxs(e.Fragment,{children:[e.jsx(R,{setIsDrawerOpen:y,isOpen:p,onClose:()=>y(!1),serviceCategoryId:t}),e.jsx(A,{onConfirm:m,onCancel:()=>d(!1),isOpen:x,message:"Are you sure you want to delete this item?",confirmText:"Delete",cancelText:"Cancel",isLoading:n}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200/80 dark:border-[var(--border-primary)]",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsx("tr",{children:c.map((r,g)=>e.jsx("th",{scope:"col",className:"table-th",children:r.label},g))})}),e.jsx("tbody",{className:"bg-white dark:bg-transparent divide-y divide-gray-100 dark:divide-[var(--border-secondary)]",children:s.length>0&&s.map((r,g)=>e.jsxs("tr",{className:`align-top ${g%2!==0?"bg-gray-50/50 dark:bg-[var(--surface-elevated)]/30":"bg-white dark:bg-transparent"}`,children:[e.jsx("td",{className:"table-td",children:r.id}),e.jsx("td",{className:"table-td",children:r.name}),e.jsx("td",{className:"table-td",children:N(r.created_at)}),e.jsx("td",{className:"table-td",children:N(r.updated_at)}),e.jsx("td",{className:"table-td",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{onClick:()=>u(r),size:20,className:"dark:text-gray-400 text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer"}),e.jsx(P,{onClick:()=>{d(!0),h(r.id)},size:20,className:"dark:text-gray-400 text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer"}),e.jsx(E,{onClick:()=>{h(r.id),y(!0)},size:20,className:"dark:text-gray-400 text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer"})]})})]},g))})]})})]})},k=[{label:"ID"},{label:"Name"},{label:"Created At"},{label:"Updated At"},{label:"Action"}],V=()=>{const[c,s]=a.useState([]),[i,o]=a.useState({}),[l,b]=a.useState(1),[x,d]=a.useState(""),[t,h]=a.useState(!1),[n,v]=a.useState(!1),[p,y]=a.useState("");return a.useEffect(()=>{const m=setTimeout(()=>{y(x)},350);return()=>{clearTimeout(m)}},[x]),a.useEffect(()=>{(async()=>{try{v(!0);const u=await q(9,l,p);s(u.data.items||[]),o(u.data.pagination||{})}catch(u){console.log(u)}finally{v(!1)}})()},[l,t,p]),e.jsx("div",{children:e.jsxs(z,{noborder:!0,children:[e.jsxs("div",{className:"mb-6 pb-4 border-b border-gray-100 dark:border-[var(--border-secondary)]",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Service Categories"}),e.jsx("p",{className:"md:text-base text-[14px] text-gray-500 dark:text-gray-400 mt-1",children:"Browse, search, and manage service categories"})]}),e.jsx("div",{className:"flex items-center w-full flex-col mt-3",children:e.jsxs("div",{className:"flex justify-between w-full mb-5",children:[e.jsx("div",{className:"flex items-center gap-2 overflow-hidden",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:x,onChange:m=>d(m.target.value),className:"w-full pl-9 pr-3 py-2 text-sm rounded-lg border border-gray-200/80 dark:border-[var(--border-primary)] bg-gray-50/50 dark:bg-[var(--surface-elevated)] text-gray-700 dark:text-slate-200 placeholder-gray-400 dark:placeholder-slate-500 outline-none focus:border-indigo-300 dark:focus:border-indigo-500/50 focus:ring-2 focus:ring-indigo-500/10 transition-all"}),e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500 w-4 h-4"})]})}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-3.5 py-2 text-sm font-medium rounded-lg border border-gray-200/80 dark:border-[var(--border-primary)] bg-white dark:bg-[var(--surface-elevated)] text-gray-600 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-[var(--surface-hover)] transition-colors flex-shrink-0",children:[e.jsx("span",{className:"sm:block hidden",children:"Export"}),e.jsx(_,{size:20})]})]})}),n?e.jsx(L,{columns:k,rows:12}):e.jsx(B,{columns:k,serviceCategoryRows:c,setServiceCategoryRows:s,refetch:t,setRefetch:h}),e.jsx("div",{className:"my-4 w-full flex justify-center",children:e.jsx(U,{onPageChange:b,pagination:i,isLoading:n})})]})})};export{V as default};
